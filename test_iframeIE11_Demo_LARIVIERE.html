<!DOCTYPE html>
<html>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1,IE=EmulateIE11" />
<body onload="sendparameters()"  style="background-color: #581D74; color:white;">
<!--script src="https://poc-frameout.cs129.force.com/s/lightning/lightning.out.js"></script-->
<h2>Simulation du Poste de travail</h2>

  <table  style="position: absolute;  max-width: 1025px; width: 100%; height: 70px; left: 255px; top: 180px; background-color: white; color:black;">
    <tr>
    <td style="width:50%">
        <div style="font-family: Ubuntu;font-style: normal;font-weight: 500;font-size: 21px;line-height: 22px;">
          Vue globale des contacts client
        </div>
          <div style="font-family: Ubuntu;font-style: normal;font-weight: normal;font-size: 16px;line-height: 22px; color: #581D74">
            Pers. 54307403 - Jean LARIVIERE
          </div>
    </td>
    <td  style="width:30%;">
      <form name="form1">
          <!--label for="fposte">Poste:</label>
          <input type="text" id="fposte" name="fposte" value="TEST"><br><br-->
          <label for="fpersons">Persons:</label>
          <select id="fpersons" name="fpersons" onchange="sendparameters()">
            <option value="['0033O00000IyXgRQAV' , '0033O00000IyXj1QAF','0033O00000JatEcQAJ','0033O00000IyXj6QAF']">Toute la relation</option>
            <option value="['0033O00000IyXgRQAV']">Jean LARIVIERE</option>
            <option value="['0033O00000JatEcQAJ']">Stéphanie LARIVIERE</option>
            <option value="['0033O00000IyXj1QAF']">Fabienne LARIVIERE</option>
            <option value="['0033O00000IyXj6QAF']">Pierre LARIVIERE</option>
          </select>
            <!--input style="width:600px;" type="text" id="persons" name="fpersons" value="['0033O00000IHcKeQAL' , '0033O00000IHbtkQAD' , '0033O00000IHcKfQAL']"-->
      </form>
    <!--button onclick="sendparameters()">Envoi des paramètres</button-->
    </td>
  </tr>
</table>
<iframe id="iframe" src="https://poc-frameout.cs129.force.com/testvisual" 
        frameborder="0" style="overflow: hidden; max-height:550px;  height: 100%; max-width: 1025px; width: 100%; position: absolute; left: 255px; top: 250px;"></iframe>

<script type="text/javascript">
     
    var lexOrigin = '*';
     
    function sendparameters() {
        var fposte = 'test'; //document.form1.fposte.value;
        var fpersonsSelect = document.form1.fpersons;
        var fpersons = fpersonsSelect.options[fpersonsSelect.selectedIndex].value;

        var message = {
            poste: fposte,
            persons: fpersons
        };
		//var x = iframe.contentWindow;
		//x.postMessage(message, lexOrigin);
		var xIE11 = document.getElementsByTagName("iframe")[0].contentWindow;
        xIE11.postMessage(message, lexOrigin);
    }
     
</script>

</body>
</html>